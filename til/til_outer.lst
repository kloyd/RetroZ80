---------------------------------------------
Z80 ASSEMBLER LISTING
Line   Addr Opcode      Label   Instruction
---------------------------------------------
0001   0000             ; TIL
0002   0000             ; Outer Interpreter
0003   0000             
0004   0000             ; TIL
0005   0000             
0006   0000             ; START/RESTART
0007   0000             	ORG	$8000
0008   8000             
0009   8000 11 0C 82    START:	LD	DE,RSTMSG
0010   8003 3A 88 80    	LD	A,(BASE)
0011   8006 A7          	AND	A
0012   8007 20 08       	JR	NZ, ABORT
0013   8009 3E 0A       	LD	A,10
0014   800B 32 88 80    	LD	(BASE),A
0015   800E 11 18 82    	LD	DE,SRTMSG
0016   8011 31 09 82    ABORT:	LD	SP,STACK
0017   8014 D5          	PUSH	DE
0018   8015 21 00 00    	LD	HL,0
0019   8018 22 89 80    	LD	(MODE),HL
0020   801B FD 21 63 80 	LD	IY,NEXT
0021   801F DD 21 49 80 	LD	IX,RETURN
0022   8023 21 90 1F    	LD	HL,8080
0023   8026 22 8A 80    	LD	(LBEND),HL
0024   8029 01 2F 80    	LD	BC,OUTER
0025   802C C3 63 80    	JP	NEXT
0026   802F             
0027   802F             
0028   802F             ; TYPE
0029   802F             OUTER:
0030   802F             
0031   802F             ; INLINE
0032   802F             
0033   802F             ; ASPACE
0034   802F             
0035   802F             ; TOKEN
0036   802F             
0037   802F             ; ?SEARCH
0038   802F             
0039   802F             ; ABSENT?
0040   802F             ; - NO -> ?EXECUTE -> ASPACE
0041   802F             ; - YES -> NUMBER
0042   802F             
0043   802F             ; ?EXECUTE
0044   802F             
0045   802F             ; ?NUMBER
0046   802F             
0047   802F             ; INVALID NUMBER?
0048   802F             ; NO -> ASPACE
0049   802F             ; YES -> QUESTION
0050   802F             
0051   802F             ; QUESTION
0052   802F             QUESTION:
0053   802F 31 80       	DW	$+2
0054   8031 2A 0A 82    	LD 	HL,(DP)
0055   8034 23          	INC 	HL
0056   8035 CB 7E       	BIT	7,(HL)	; IF BIT SET, A TERMINATOR
0057   8037 28 06       	JR	Z,ERROR	;NOT SET ERROR
0058   8039 11 53 80    	LD	DE,OK
0059   803C D5          	PUSH	DE
0060   803D FD E9       	JP	(IY)
0061   803F CD 50 80    ERROR:	CALL	_CRLF
0062   8042 FD 21 49 80 	LD	IY,RETURN
0063   8046 C3 4F 80    	JP	_TYPE
0064   8049 11 51 80    RETURN:	LD	DE,MSG?
0065   804C C3 56 80    	JP	_PATCH
0066   804F             
0067   804F             ; GOTO TYPE
0068   804F             
0069   804F             
0070   804F             ; Internals
0071   804F 00          _TYPE:	DB	0
0072   8050 00          _CRLF	DB	0
0073   8051 3F          MSG?	DB	'?'
0074   8052 00          	DB	0
0075   8053 4F 4B 00    OK	DB	'OK',0
0076   8056             
0077   8056 00          _PATCH	DB	0
0078   8057             
0079   8057             ; Inner Interpreter
0080   8057             
0081   8057 59 80       SEMI:	DW	$ + 2
0082   8059 DD 4E 00    	LD	C,(IX+0)
0083   805C DD 23       	INC	IX
0084   805E DD 46 00    	LD	B,(IX+0)
0085   8061 DD 23       	INC	IX
0086   8063 0A          NEXT:	LD	A,(BC)
0087   8064 6F          	LD	L,A
0088   8065 03          	INC	BC
0089   8066 0A          	LD	A,(BC)
0090   8067 67          	LD	H,A
0091   8068 03          	INC	BC
0092   8069 5E          RUN:	LD	E,(HL)
0093   806A 23          	INC	HL
0094   806B 56          	LD	D,(HL)
0095   806C 23          	INC	HL
0096   806D EB          	EX	DE,HL
0097   806E E9          	JP	(HL)
0098   806F             
0099   806F DD 2B       COLON:	DEC	IX
0100   8071 DD 70 00    	LD	(IX+0),B
0101   8074 DD 2B       	DEC	IX
0102   8076 DD 71 00    	LD	(IX+0),C
0103   8079 4B          	LD	C,E
0104   807A 42          	LD	B,D
0105   807B FD E9       	JP	(IY)
0106   807D             
0107   807D             ; EXECUTE primitive needs a dictionary entry for defining words.
0108   807D             ; This is a model for all other Primitive words that will be added to the dictionary
0109   807D             ;
0110   807D 07 45 58 45 	DB	7,'E','X','E'	; Header for dictionary search
0111   8081 00 00       	DW	0		; Link address 0000 == End of Linked List.
0112   8083 85 80       EXECUTE: DW	$ + 2		; Address of EXECUTE.
0113   8085 E1          	POP	HL		; primitive code.
0114   8086 18 E1       	JR	RUN
0115   8088             
0116   8088             ; ***
0117   8088             
0118   8088             ; Variables
0119   8088 00          BASE	DB	0
0120   8089 00          MODE	DB	0
0121   808A 00 00 00 00 LBEND	DS	128
0121   808E 00 00 00 00 
0121   8092 00 00 00 00 
0121   8096 00 00 00 00 
0121   809A 00 00 00 00 
0121   809E 00 00 00 00 
0121   80A2 00 00 00 00 
0121   80A6 00 00 00 00 
0121   80AA 00 00 00 00 
0121   80AE 00 00 00 00 
0121   80B2 00 00 00 00 
0121   80B6 00 00 00 00 
0121   80BA 00 00 00 00 
0121   80BE 00 00 00 00 
0121   80C2 00 00 00 00 
0121   80C6 00 00 00 00 
0121   80CA 00 00 00 00 
0121   80CE 00 00 00 00 
0121   80D2 00 00 00 00 
0121   80D6 00 00 00 00 
0121   80DA 00 00 00 00 
0121   80DE 00 00 00 00 
0121   80E2 00 00 00 00 
0121   80E6 00 00 00 00 
0121   80EA 00 00 00 00 
0121   80EE 00 00 00 00 
0121   80F2 00 00 00 00 
0121   80F6 00 00 00 00 
0121   80FA 00 00 00 00 
0121   80FE 00 00 00 00 
0121   8102 00 00 00 00 
0121   8106 00 00 00 00 
0122   810A             
0123   810A 00 00 00 00 STK	DS	255
0123   810E 00 00 00 00 
0123   8112 00 00 00 00 
0123   8116 00 00 00 00 
0123   811A 00 00 00 00 
0123   811E 00 00 00 00 
0123   8122 00 00 00 00 
0123   8126 00 00 00 00 
0123   812A 00 00 00 00 
0123   812E 00 00 00 00 
0123   8132 00 00 00 00 
0123   8136 00 00 00 00 
0123   813A 00 00 00 00 
0123   813E 00 00 00 00 
0123   8142 00 00 00 00 
0123   8146 00 00 00 00 
0123   814A 00 00 00 00 
0123   814E 00 00 00 00 
0123   8152 00 00 00 00 
0123   8156 00 00 00 00 
0123   815A 00 00 00 00 
0123   815E 00 00 00 00 
0123   8162 00 00 00 00 
0123   8166 00 00 00 00 
0123   816A 00 00 00 00 
0123   816E 00 00 00 00 
0123   8172 00 00 00 00 
0123   8176 00 00 00 00 
0123   817A 00 00 00 00 
0123   817E 00 00 00 00 
0123   8182 00 00 00 00 
0123   8186 00 00 00 00 
0123   818A 00 00 00 00 
0123   818E 00 00 00 00 
0123   8192 00 00 00 00 
0123   8196 00 00 00 00 
0123   819A 00 00 00 00 
0123   819E 00 00 00 00 
0123   81A2 00 00 00 00 
0123   81A6 00 00 00 00 
0123   81AA 00 00 00 00 
0123   81AE 00 00 00 00 
0123   81B2 00 00 00 00 
0123   81B6 00 00 00 00 
0123   81BA 00 00 00 00 
0123   81BE 00 00 00 00 
0123   81C2 00 00 00 00 
0123   81C6 00 00 00 00 
0123   81CA 00 00 00 00 
0123   81CE 00 00 00 00 
0123   81D2 00 00 00 00 
0123   81D6 00 00 00 00 
0123   81DA 00 00 00 00 
0123   81DE 00 00 00 00 
0123   81E2 00 00 00 00 
0123   81E6 00 00 00 00 
0123   81EA 00 00 00 00 
0123   81EE 00 00 00 00 
0123   81F2 00 00 00 00 
0123   81F6 00 00 00 00 
0123   81FA 00 00 00 00 
0123   81FE 00 00 00 00 
0123   8202 00 00 00 00 
0123   8206 00 00 00    
0124   8209 00          STACK	DB	0
0125   820A             
0126   820A 00 00       DP	DW	0
0127   820C             
0128   820C             ; Strings
0129   820C 20 54 49 4C RSTMSG	DB	' TIL Restart'
0129   8210 20 52 65 73 
0129   8214 74 61 72 74 
0130   8218 20 48 65 6C SRTMSG	DB	' Hello, I'm a Til'
0130   821C 6C 6F 2C 20 
0130   8220 49 27 6D 20 
0130   8224 61 20 54 69 
0130   8228 6C          
0131   8229             
0132   8229             
Number of errors = 0
